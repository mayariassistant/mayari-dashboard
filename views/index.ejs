<div class="grid">
    <!-- Identity & Status -->
    <div class="card">
        <div class="card-header">
            <i data-lucide="info"></i>
            <h2>System Status</h2>
        </div>
        <div style="margin-bottom: 20px;">
            <span class="status-badge">
                <i data-lucide="check-circle-2" style="width:14px;height:14px;"></i>
                <%= status %>
            </span>
        </div>
        <div class="subtext">
            <p><strong>Uptime:</strong> <%= Math.floor(uptime / 3600) %>h <%= Math.floor((uptime % 3600) / 60) %>m</p>
            <p><strong>Workspace:</strong> <code>/data/.openclaw/workspace</code></p>
        </div>
        <div style="margin-top: 20px;">
            <%- identity %>
        </div>
    </div>

    <!-- Calendar -->
    <div class="card">
        <div class="card-header">
            <i data-lucide="calendar"></i>
            <h2>Schedule</h2>
        </div>
        <% if (calendar && calendar.length > 0) { %>
            <ul>
                <% calendar.forEach(event => { %>
                    <li>
                        <div style="display:flex; justify-content: space-between; align-items: flex-start;">
                            <div>
                                <strong><%= event.summary %></strong>
                                <div class="subtext">
                                    <%= new Date(event.start).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) %> - 
                                    <%= new Date(event.end).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) %>
                                </div>
                            </div>
                        </div>
                    </li>
                <% }); %>
            </ul>
        <% } else { %>
            <p class="subtext">No events for today.</p>
        <% } %>
    </div>

    <!-- Gmail -->
    <div class="card">
        <div class="card-header">
            <i data-lucide="mail"></i>
            <h2>Recent Communications</h2>
        </div>
        <% if (emails && emails.length > 0) { %>
            <ul>
                <% emails.forEach(email => { %>
                    <li>
                        <div style="font-size: 0.9rem; margin-bottom: 4px;"><strong><%= email.subject %></strong></div>
                        <div class="subtext">From: <%= email.from.split('<')[0].trim() %></div>
                    </li>
                <% }); %>
            </ul>
        <% } else { %>
            <p class="subtext">Inbox is empty.</p>
        <% } %>
    </div>

    <!-- Token Usage -->
    <div class="card">
        <div class="card-header">
            <i data-lucide="activity"></i>
            <h2>Resource Usage</h2>
        </div>
        <% if (tokens) { %>
            <div class="subtext">
                <p><strong>Total Tokens:</strong> <%= tokens.total_tokens.toLocaleString() %></p>
                <p><strong>Input:</strong> <%= tokens.prompt_tokens.toLocaleString() %></p>
                <p><strong>Output:</strong> <%= tokens.completion_tokens.toLocaleString() %></p>
            </div>
        <% } else { %>
            <p class="subtext">No token data available.</p>
        <% } %>
    </div>
</div>
